# Application
APP_NAME=SampleTok
APP_VERSION=0.1.0
DEBUG=True
SECRET_KEY=your-secret-key-here-change-in-production
ADMIN_API_KEY=your-admin-api-key-here-change-in-production  # Separate key for admin endpoints (required in production)
ENVIRONMENT=development
PUBLIC_APP_URL=https://app.sampletheinternet.com  # Public-facing URL for shareable links and webhook callbacks

# API
API_V1_STR=/api/v1
BACKEND_CORS_ORIGINS=["http://localhost:3000", "http://localhost:3001"]

# Database
DATABASE_URL=postgresql+asyncpg://sampletok:sampletok@localhost:5432/sampletok
DATABASE_ECHO=False

# Inngest Configuration
# For local development: Leave blank - uses Inngest Dev Server
# For production: Get these from https://app.inngest.com/env/production/manage/keys
INNGEST_EVENT_KEY=           # Production: Event key (starts with "inngest")
INNGEST_SIGNING_KEY=         # Production: Signing key (for webhook security)

# Storage (S3 or R2)
STORAGE_TYPE=s3  # or "r2" for Cloudflare R2
AWS_ACCESS_KEY_ID=your-access-key
AWS_SECRET_ACCESS_KEY=your-secret-key
AWS_REGION=us-east-1
S3_BUCKET_NAME=sampletok-samples
S3_ENDPOINT_URL=  # Leave empty for AWS S3, set for R2

# Clerk Authentication
# Get these from: https://dashboard.clerk.com/last-active?path=api-keys
CLERK_FRONTEND_API=your-app.clerk.accounts.dev
CLERK_SECRET_KEY=sk_test_...

# TikTok Processing
MAX_VIDEO_DURATION_SECONDS=300
MAX_CONCURRENT_DOWNLOADS=5
DOWNLOAD_TIMEOUT_SECONDS=60

# Audio Processing
AUDIO_SAMPLE_RATE=48000
AUDIO_BIT_DEPTH=24
MP3_BITRATE=320
WAVEFORM_WIDTH=800
WAVEFORM_HEIGHT=140

# RapidAPI Settings (required)
RAPIDAPI_KEY=your-rapidapi-key-here
RAPIDAPI_HOST=tiktok-video-no-watermark2.p.rapidapi.com

# Instagram RapidAPI Settings (required for video downloading)
RAPIDAPI_INSTAGRAM_KEY=your-instagram-rapidapi-key-here
RAPIDAPI_INSTAGRAM_HOST=instagram-best-experience.p.rapidapi.com

# Instagram Graph API Settings (required for auto-engagement feature)
# Step 1: Create a Facebook App at https://developers.facebook.com/apps/
# Step 2: Add Instagram Graph API product to your app
# Step 3: Add use cases: Manage messaging & content on Instagram
# Step 4: Generate a long-lived User Access Token (60-day expiry) via Graph API Explorer
# Step 5: Get your Instagram Business Account ID from Graph API Explorer
# Step 6: Set a random webhook verification token (any secure string, e.g., openssl rand -hex 32)
# See backend/docs/INSTAGRAM_GRAPH_API_SETUP.md for detailed setup instructions
INSTAGRAM_APP_ID=your-facebook-app-id
INSTAGRAM_APP_SECRET=your-facebook-app-secret
INSTAGRAM_ACCESS_TOKEN=your-long-lived-instagram-access-token
INSTAGRAM_BUSINESS_ACCOUNT_ID=your-instagram-business-account-id
INSTAGRAM_WEBHOOK_VERIFY_TOKEN=your-random-webhook-verify-token-here

# Postmark Settings (required for email notifications)
# Get your API key from: https://postmarkapp.com/
# Verify your sender domain/email at: https://account.postmarkapp.com/signatures
POSTMARK_API_KEY=your-postmark-api-key-here
POSTMARK_FROM_EMAIL=noreply@sampletheinternet.com

# La La AI Settings (required for stem separation feature)
# Get your API key from: https://www.lalal.ai/api/
LALAL_API_KEY=your-lalal-ai-api-key-here

# Stem Separation Configuration
MAX_STEMS_PER_REQUEST=5               # Maximum stems that can be requested at once
MAX_CONCURRENT_DOWNLOADS_PER_USER=3   # Maximum concurrent stem downloads per user

# Rate Limiting
COLLECTION_RATE_LIMIT_PER_MINUTE=10           # Max collection processing requests per minute per user
COLLECTIONS_LIST_RATE_LIMIT_PER_MINUTE=60     # Max collection list requests per minute per user
STEM_SEPARATION_RATE_LIMIT_PER_MINUTE=5       # Max stem separation requests per minute per user
STEM_DOWNLOAD_RATE_LIMIT_PER_MINUTE=30        # Max stem download requests per minute per user

# Stripe Settings
# Get these from: https://dashboard.stripe.com/test/apikeys
STRIPE_SECRET_KEY=sk_test_...
STRIPE_WEBHOOK_SECRET=whsec_...
STRIPE_PUBLISHABLE_KEY=pk_test_...
# Customer Portal Configuration ID from: https://dashboard.stripe.com/test/settings/billing/portal
STRIPE_PORTAL_CONFIGURATION_ID=bpc_...

# Stripe Price IDs - Subscription Plans
# Create these in Stripe Dashboard: https://dashboard.stripe.com/test/products
STRIPE_PRICE_BASIC_MONTHLY=price_...
STRIPE_PRICE_BASIC_ANNUAL=price_...
STRIPE_PRICE_PRO_MONTHLY=price_...
STRIPE_PRICE_PRO_ANNUAL=price_...
STRIPE_PRICE_ULTIMATE_MONTHLY=price_...
STRIPE_PRICE_ULTIMATE_ANNUAL=price_...

# Stripe Price IDs - Top-Up Packs (optional if using dynamic pricing)
STRIPE_PRICE_TOPUP_SMALL=price_...
STRIPE_PRICE_TOPUP_MEDIUM=price_...
STRIPE_PRICE_TOPUP_LARGE=price_...

# Subscription Tier Configuration
# Monthly credit allowances for each subscription tier
TIER_CREDITS_BASIC=100
TIER_CREDITS_PRO=400
TIER_CREDITS_ULTIMATE=1500

# Top-Up Discounts by Tier (percentage as decimal, e.g., 0.10 = 10% off)
TIER_DISCOUNT_BASIC=0.0
TIER_DISCOUNT_PRO=0.10
TIER_DISCOUNT_ULTIMATE=0.20

# Top-Up Package Configuration
# Credits and pricing for each top-up package
TOPUP_CREDITS_SMALL=50
TOPUP_PRICE_SMALL_CENTS=699      # $6.99
TOPUP_CREDITS_MEDIUM=150
TOPUP_PRICE_MEDIUM_CENTS=1799    # $17.99
TOPUP_CREDITS_LARGE=500
TOPUP_PRICE_LARGE_CENTS=4999     # $49.99

# Frontend URL - base URL for all Stripe redirects (success_url and cancel_url are computed from this)
FRONTEND_URL=http://localhost:3000

# PostHog Analytics - Server-side (optional - for usage tracking and analytics)
# IMPORTANT: This is a PRIVATE server-side key with FULL API access
# - Can delete data, access admin features, and perform all operations
# - NEVER expose this key to frontend or commit to version control
# - Different from frontend NEXT_PUBLIC_POSTHOG_KEY (that one is public and limited)
# Get your PERSONAL API KEY from: PostHog Settings > User > Personal API Keys
# Or use PROJECT API KEY from: PostHog Settings > Project > Project API Key
# For GDPR compliance, use EU hosting (https://eu.posthog.com)
POSTHOG_PROJECT_KEY=phc_...
POSTHOG_HOST=https://eu.posthog.com